<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fitness Challenge - Journey zur Strandfigur</title>
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/navbar.css">
    <link rel="stylesheet" href="./css/challenge.css">


</head>
<body>
    <header>
        <nav class="navbar">
            <div class="navbar-left" style="display: none">
                <label for="languageSelect">Choose language:</label>
                <select id="languageSelect" onchange="changeLanguage()">
                    <option value="en">English</option>
                    <option value="de">Deutsch</option>
                </select>
            </div>
            <div class="navbar-right">
                <select id="navDropdown" class="mobile-dropdown">
                    <option value="./index" selected>Home</option>
                    <option value="./pages/challenge.html">Settings</option>
                    <option value="./pages/instructions.html">Get Started</option>
                </select>
                <div class="desktop-menu">
                    <ul>
                        <li>
                            <div class="darkmode-container" style="display: none">
                                <p class="margin-right">Dark Mode</p>
                                <input type="checkbox" id="darkModeToggle" onchange="toggleDarkMode()">
                                <label for="darkModeToggle"></label>
                            </div>
                        </li>
                        <li id="home"><a href="./index.html">Home</a></li>
                        <li id="challenge"><a href="challenge.html">Challenge</a></li>
                        <li id="instructions"><a href="#">Get Started</a></li>
                    </ul>
                </div>
            </div>
        </nav>

        <h1>Iron Insanity</h1>
    </header>

    <section id="showcase">
        <div class="container">
            <h1>Deine Reise zur Strandfigur</h1>
            <p>Trainiere in verschiedenen "Fitness-St√§dten", erf√ºlle Workouts, sammle Troph√§en und steige im Level auf!</p>
        </div>
    </section>

    <section id="strength-bar">
        <div class="container">
            <h2>St√§rkebarometer</h2>
            
            <div class="xp-bars" id="xpBars"></div>
            
            <div class="xp-info">
                <p>Erreiche 30 XP f√ºr ein Level-Up!</p>
            </div>
    
            <div class="level-info">
                <p>Aktuelles Level: <span id="currentLevel">1</span></p>
            </div>
        </div>
    </section>

    <div class="container">
        <div class="workouts" id="workoutsContainer">
            <!-- Dynamische Erstellung der St√§dte -->
        </div>
    </div>

    <script>
        const cities = [
            {
                name: "Munich",
                tasks: [
                    "Crush the Oktoberfest with your incredible squats",
                    "Flex your muscles in the Englischer Garten with pull-ups",
                    "Sprint through the Munich Airport terminals"
                ],
                enabled: true
            },
            {
                name: "Barcelona",
                tasks: [
                    "Power through a stair climb at the Sagrada Familia",
                    "Perform beach sprints at Barceloneta",
                    "Master push-ups in the Park G√ºell"
                ],
                enabled: false
            },
            {
                name: "Tokyo",
                tasks: [
                    "Conquer the steps to Tokyo Tower",
                    "Engage in a cardio session through Shinjuku Gyoen Park",
                    "Stretch and meditate at the Meiji-Schrein"
                ],
                enabled: false
            },
            {
                name: "New York",
                tasks: [
                    "Power walk to the top of the Statue of Liberty",
                    "Run a lap around Central Park",
                    "Do jumping jacks at Times Square"
                ],
                enabled: false
            },
            {
                name: "Paris",
                tasks: [
                    "Climb the Eiffel Tower stairs",
                    "Do lunges at the Louvre",
                    "Jog along the Seine River"
                ],
                enabled: false
            },
            {
                name: "London",
                tasks: [
                    "Perform push-ups at Buckingham Palace",
                    "Sprint around the Tower of London",
                    "Do yoga in Hyde Park"
                ],
                enabled: false
            }
        ];

        const workoutsContainer = document.getElementById('workoutsContainer');

        window.onload = function() {
            createXPBar();
            createCityWorkouts();
            enableCity(1);
        }

        function createXPBar() {
            const xpBars = document.getElementById('xpBars');
            // Add logic to create XP bars for all cities if needed
        }

        function createCityWorkouts() {
            cities.forEach((city, index) => {
                const cityDiv = document.createElement('div');
                cityDiv.className = 'workout';
                cityDiv.id = `city${index + 1}`;
                cityDiv.dataset.enabled = city.enabled;

                const cityHeader = document.createElement('h2');
                cityHeader.textContent = city.name;
                const trophySpan = document.createElement('span');
                trophySpan.className = 'trophy tooltip';
                trophySpan.title = 'Troph√§e f√ºr alle Aufgaben abgeschlossen';
                trophySpan.textContent = 'üèÜ';
                cityHeader.appendChild(trophySpan);

                const xpSpan = document.createElement('span');
                xpSpan.className = 'xp';
                xpSpan.textContent = '0';

                const progressBar = document.createElement('div');
                progressBar.className = 'progress-bar';

                const progressFill = document.createElement('div');
                progressFill.className = 'progress-fill';
                progressFill.id = `city${index + 1}-progress`;
                progressBar.appendChild(progressFill);

                cityDiv.appendChild(cityHeader);
                cityDiv.appendChild(xpSpan);
                cityDiv.appendChild(progressBar);

                city.tasks.forEach((task, taskIndex) => {
                    const taskP = document.createElement('p');
                    taskP.className = `task${taskIndex + 1}`;
                    taskP.textContent = `${taskIndex + 1}. ${task}`;

                    const taskButton = document.createElement('button');
                    taskButton.className = 'complete-btn';
                    taskButton.textContent = 'Abschlie√üen';
                    taskButton.onclick = () => completeTask(index + 1, taskIndex + 1);
                    taskButton.disabled = !city.enabled;

                    cityDiv.appendChild(taskP);
                    cityDiv.appendChild(taskButton);
                });

                workoutsContainer.appendChild(cityDiv);
            });
        }

        function completeTask(cityIndex, taskIndex) {
            const taskElement = document.querySelector(`#city${cityIndex} .task${taskIndex}`);
            if (taskElement) {
                taskElement.classList.add('complete');
            }
            addXP(cityIndex, 10);
        }

        function addXP(cityIndex, xpToAdd) {
            const xpElement = document.querySelector(`#city${cityIndex} .xp`);
            const progressFill = document.querySelector(`#city${cityIndex}-progress`);

            const currentXP = parseInt(xpElement.textContent);
            const newXP = currentXP + xpToAdd;
            xpElement.textContent = newXP;

            const maxXP = 30;
            const progressPercentage = (newXP / maxXP) * 100;
            progressFill.style.width = `${progressPercentage}%`;

            if (newXP >= maxXP) {
                unlockTrophy(cityIndex);
            }

        }

        function updateStrengthBar() {
            const overallProgress = document.getElementById('overall-progress');
            const maxTotalXP = 180;
            const progressPercentage = (totalXP / maxTotalXP) * 100;
            overallProgress.style.width = `${progressPercentage}%`;
        }

        function unlockTrophy(cityIndex) {
            const trophyElement = document.querySelector(`#city${cityIndex} .trophy`);
            if (trophyElement) {
                trophyElement.style.display = 'inline-block';
            }
            if (cityIndex < cities.length) {
                enableCity(cityIndex + 1);
            }
        }

        function enableCity(cityIndex) {
            const cityDiv = document.getElementById(`city${cityIndex}`);
            if (cityDiv) {
                cityDiv.dataset.enabled = true;
                cityDiv.querySelectorAll('button.complete-btn').forEach(button => button.disabled = false);
            }
        }
    </script>
</body>
</html>
